language: node_js
node_js:
  - 'node'
  - '10'
  - '8'
matrix:
  fast_finish: true
  allow_failures:
    - node_js: 'node'
before_script:
  - npx danger ci
  - npm run bootstrap
  - npm run build
# script:
#   - npm test
# before_deploy:
#   - git config --local user.name "Airbnb Release Bot"
#   - git config --local user.email "airbnb-cli-bot@airbnb.com"
jobs:
  include:
    - name: Jest
      script: npm run jest:coverage -- -w 4
    - name: ESLint
      script: npm run lint:errors
deploy:
  - provider: script
    script: npm run deploy:ghp
    skip_cleanup: true
    on:
      branch: master
      node_js: '10'
# - provider: script
#   script: npm run deploy:release
#   skip_cleanup: true
#   on:
#     branch: master
#     node_js: '10'
